add_executable(test_shared_queue shared_queue_test.cpp)
target_link_libraries(test_shared_queue PRIVATE zenith_execution GTest::gtest_main)

add_executable(sticky_queue_test sticky_queue_test.cpp)
target_link_libraries(sticky_queue_test PRIVATE zenith_execution GTest::gtest_main)

add_executable(observable_message_pool_test observable_message_pool_test.cpp)
target_link_libraries(observable_message_pool_test PRIVATE zenith_execution GTest::gtest_main)

include(GoogleTest)
gtest_discover_tests(test_shared_queue)
gtest_discover_tests(sticky_queue_test)
gtest_discover_tests(observable_message_pool_test)

# Benchmarks (only when Benchmark is enabled)
if(ENABLE_BENCHMARK)
    add_executable(execution_benchmark execution_benchmark.cpp)
    target_link_libraries(execution_benchmark PRIVATE zenith_execution benchmark::benchmark)
    add_test(NAME execution_benchmark COMMAND execution_benchmark)
    set_tests_properties(execution_benchmark PROPERTIES LABELS bench)
endif()
