server {
    listen 8080;
    listen [::]:8080;
    http2 on;
    server_name localhost;
    
    # Increase max requests per connection (default is 1000)
    keepalive_requests 10000000;
    
    # Mock SAVE endpoint (POST /api/v1/links)
    location = /api/v1/links {
        default_type application/json;
        return 201 '{"id":"abc123","status":"created"}';
    }
    
    # Mock FIND/DELETE endpoint (GET/DELETE /api/v1/links/:id)
    location ~ ^/api/v1/links/(.+)$ {
        default_type application/json;
        return 200 '{"url":"https://example.com","active":true}';
    }
    
    # Health check
    location = /health {
        default_type application/json;
        return 200 '{"status":"ok"}';
    }
}
